class t{constructor(t=10,e=3){this.size=t,this.hashCount=e,this.bits=Array(t).fill(!1)}hash(t,e){let i=0;for(let n=0;n<t.length;n++)i=(i*e+t.charCodeAt(n))%this.size;return i}add(t){let e=[];for(let i=1;i<=this.hashCount;i++){let n=this.hash(t,i);this.bits[n]=!0,e.push(n)}return e}contains(t){for(let e=1;e<=this.hashCount;e++){let i=this.hash(t,e);if(!this.bits[i])return!1}return!0}}class e{div1;div2;side;color;constructor(t,e,i=null,n=null){this.div1=t.id,this.div2=e.id,this.side=i,this.color=n}}const i=new class{static svg;itemLines;checkLines;canvasContainer;constructor(){this.canvasContainer=document.getElementById("filter-container"),this.initializeSVG(),this.itemLines=[],this.checkLines=[]}renderLines(){for(let t of(this.canvasContainer.removeChild(this.svg),this.initializeSVG(),this.itemLines))this.#t(t);for(let t of this.checkLines)this.#t(t)}initializeSVG(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("id","connection-svg"),this.svg.style.position="absolute",this.svg.style.left="0",this.svg.style.top="0",this.svg.style.width="100%",this.svg.style.height="100%",this.svg.style.pointerEvents="none",this.canvasContainer.appendChild(this.svg)}#t(t){let e,i,n,s,l=document.getElementById(t.div2);"0"===l.innerHTML&&(l.style.backgroundColor="#f76c6cff"),"1"===l.innerHTML&&(l.style.backgroundColor="#4bb543ff");let h=document.getElementById(t.div1).getBoundingClientRect(),a=l.getBoundingClientRect(),o=this.canvasContainer.getBoundingClientRect();"right"===t.side&&(e=h.left-o.left,i=h.top-o.top+h.height/2,n=a.left-o.left+a.width,s=a.top-o.top+a.height/2),"left"===t.side&&(e=h.left+h.width-o.left,i=h.top+h.height/2-o.top,n=a.left-o.left,s=a.top+a.height/2-o.top);let d=document.createElementNS("http://www.w3.org/2000/svg","line"),r=t.color||"#143b83ff";return d.setAttribute("x1",e),d.setAttribute("y1",i),d.setAttribute("x2",n),d.setAttribute("y2",s),d.setAttribute("stroke",r),d.setAttribute("stroke-width","4"),this.svg.appendChild(d),d}drawCheckLine(t,i,n){let s=new e(t,i,"right",n);return this.checkLines.push(s),s}drawItemLine(t,i,n){let s=new e(t,i,"left",n);return this.itemLines.push(s),s}clearCheckLines(){this.checkLines=[]}clearAllLines(){this.itemLines=[],this.checkLines=[]}},n=new t(15,3),s=new class{draw=null;bitsRendered=!1;inputCheckButton=null;inputItemButton=null;inputCheckField=null;inputItemField=null;inputWordDiv=null;captionDiv=null;bitsDiv=null;listDiv=null;bloom=null;currentElements=[];constructor(t,e){this.draw=t,this.bitsRendered=!1,this.bloom=e,this.initializeAddItemInputContainer(),this.initializeAddItemContainer(),this.initializeBloomFilterContainer(),this.initializeCheckItemContainer(),this.initializeDisplayContainer(),this.initializeStartingParamsUI(),this.initializeDebug(["apple","banana","grape","orange"],"teste")}renderBits(){this.bitsDiv.innerHTML="",this.bloom.bits.forEach((t,e)=>{let i=document.createElement("div");i.className="bit-item",i.textContent=t?"1":"0",i.title=`Bit ${e}`,i.id="bit-"+e,this.bitsDiv.appendChild(i)})}initializeDebug(t=[],e=""){t.forEach(t=>{this.inputItemField.value=t,this.addItem()}),this.inputCheckField.value=e,this.checkItem()}checkItem(){this.draw.clearCheckLines();let t=this.inputCheckField.value.trim();if(this.inputCheckField.value="",t){let e=!0;this.inputWordDiv.textContent=t,this.inputWordDiv.style.opacity="1";for(let i=1;i<=this.bloom.hashCount;i++){let n=this.bloom.hash(t,i),s=document.getElementById("bit-"+n),l="#14ce43ff";this.bloom.bits[n]||(e=!1,l="#c93030ff"),s&&this.draw.drawCheckLine(this.inputWordDiv,s,l)}e?(this.captionDiv.textContent=`"${t}" is possibly in the set.`,this.captionAlertDiv.textContent="(true positive)",this.captionAlertDiv.style.color="#14ce43ff",this.currentElements.includes(t)||(this.captionAlertDiv.textContent="(false positive)",this.captionAlertDiv.style.color="#ff7b00ff")):(this.captionDiv.textContent=`"${t}" is definitely not in the set.`,this.captionAlertDiv.textContent="(true negative)",this.captionAlertDiv.style.color="#c93030ff")}else this.inputWordDiv.style.opacity="0",this.captionDiv.textContent="",this.captionAlertDiv.textContent="";document.dispatchEvent(new Event("refreshUI"))}addItem(){let t=this.inputItemField.value.trim();if(t){let e=document.createElement("div");e.className="list-item",e.textContent=t,e.id="item-"+t,this.listDiv.appendChild(e);let i=this.#e(t);this.bloom.add(t),this.currentElements.push(t),this.inputItemField.value="";for(let n=1;n<=this.bloom.hashCount;n++){let s=this.bloom.hash(t,n),l=document.getElementById("bit-"+s);l&&this.draw.drawItemLine(e,l,i)}this.checkItem()}}#e(t){let e=0;for(let i=0;i<t.length;i++)e=t.charCodeAt(i)+((e<<5)-e);let i="#";for(let t=0;t<3;t++)i+=(e>>8*t&255).toString(16).padStart(2,"0");return i}initializeAddItemInputContainer(){let t=document.getElementById("add-item-input-container");this.inputItemField=document.createElement("input"),this.inputItemField.type="text",this.inputItemField.placeholder="Enter item value",this.inputItemField.maxLength=20,this.inputItemField.className="input-field",t.appendChild(this.inputItemField),this.inputItemButton=document.createElement("button"),this.inputItemButton.id="add-item-btn",this.inputItemButton.textContent="Add Element",this.inputItemButton.className="input-button",t.appendChild(this.inputItemButton),this.inputItemButton.addEventListener("click",()=>this.addItem()),this.inputItemField.addEventListener("keydown",t=>{"Enter"===t.key&&this.addItem()})}initializeAddItemContainer(){let t=document.getElementById("add-item-container");t.innerHTML="",this.listDiv=document.createElement("div"),this.listDiv.id="left-list",this.listDiv.className="list-elements",t.appendChild(this.listDiv)}initializeBloomFilterContainer(){let t=document.getElementById("bloom-filter-container");t.innerHTML="",this.bitsDiv=document.createElement("div"),this.bitsDiv.className="bloom-filter-elements",t.appendChild(this.bitsDiv),this.renderBits()}initializeCheckItemContainer(){let t=document.getElementById("check-item-input-container");t.innerHTML="",this.inputCheckField=document.createElement("input"),this.inputCheckField.type="text",this.inputCheckField.placeholder="Enter item to check",this.inputCheckField.maxLength=20,this.inputCheckField.className="input-field",t.appendChild(this.inputCheckField),this.inputCheckButton=document.createElement("button"),this.inputCheckButton.textContent="Check Item",this.inputCheckButton.className="input-button",t.appendChild(this.inputCheckButton),this.inputCheckButton.addEventListener("click",()=>this.checkItem()),this.inputCheckField.addEventListener("keydown",t=>{"Enter"===t.key&&this.checkItem()})}initializeDisplayContainer(){this.displayContainer=document.getElementById("check-item-container"),this.displayContainer.innerHTML="",this.inputWordDiv=document.createElement("div"),this.inputWordDiv.id="right-list",this.inputWordDiv.className="list-item",this.displayContainer.appendChild(this.inputWordDiv),this.inputWordDiv.style.opacity="0",this.captionDiv=document.createElement("div"),this.captionDiv.id="caption",this.captionDiv.className="caption",this.displayContainer.appendChild(this.captionDiv),this.captionAlertDiv=document.createElement("div"),this.captionAlertDiv.id="caption-alert",this.captionAlertDiv.className="caption",this.displayContainer.appendChild(this.captionAlertDiv)}initializeStartingParamsUI(){let e=document.getElementById("starting-params-container");e.innerHTML="";let i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.marginBottom="12px";let n=document.createElement("label");n.textContent="Bloom filter size:",n.setAttribute("for","bloom-size-input"),n.style.marginRight="8px",n.style.minWidth="140px",n.style.textAlign="right",i.appendChild(n);let s=document.createElement("input");s.type="number",s.placeholder="Bloom filter size",s.className="input-field",s.value=this.bloom.size,s.id="bloom-size-input",i.appendChild(s),e.appendChild(i);let l=document.createElement("div");l.style.display="flex",l.style.alignItems="center",l.style.marginBottom="12px";let h=document.createElement("label");h.textContent="Number of hash functions:",h.setAttribute("for","bloom-hashcount-input"),h.style.marginRight="8px",h.style.minWidth="140px",h.style.textAlign="right",l.appendChild(h);let a=document.createElement("input");a.type="number",a.placeholder="Number of hash functions",a.className="input-field",a.value=this.bloom.hashCount,a.id="bloom-hashcount-input",l.appendChild(a),e.appendChild(l);let o=document.createElement("button");o.textContent="Set Parameters",o.className="input-button",e.appendChild(o);let d=document.createElement("label");d.textContent="Enable dummy data:",d.setAttribute("for","dummy-data-checkbox"),d.style.marginRight="8px",d.style.minWidth="140px",d.style.textAlign="right",e.appendChild(d);let r=document.createElement("input");r.type="checkbox",r.id="dummy-data-checkbox",r.style.transform="scale(1.4)",r.checked=!0,this.initializeWithDummyData=!0,e.appendChild(r),r.addEventListener("change",()=>{r.checked&&(this.initializeWithDummyData=!0)}),o.addEventListener("click",()=>{let e=parseInt(s.value),i=parseInt(a.value);isNaN(e)||isNaN(i)||(this.bloom=new t(e,i),this.currentElements=[],this.draw.clearAllLines(),this.listDiv.innerHTML="",this.inputCheckField.value="",this.checkItem(),this.initializeWithDummyData&&this.initializeDebug(["apple","banana","grape","orange"],"teste"))})}}(i,n);function l(){s.renderBits(),i.renderLines()}document.addEventListener("refreshUI",()=>{l()}),document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{l()},50)}),window.addEventListener("resize",()=>{document.dispatchEvent(new Event("refreshUI"))}),window.addEventListener("scroll",()=>{document.dispatchEvent(new Event("refreshUI"))});
//# sourceMappingURL=bloom_filter_va.dd4b3ca0.js.map
